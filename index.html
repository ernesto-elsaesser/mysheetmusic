<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Songs</title>
<style>
.add {
    width: 24px;
    height: 18px;
    padding: 1px;
    border: 0;
    border-right: 1px solid grey;
    border-bottom: 1px solid grey;
}
</style>
</head>
<body style="margin: 0; font-size: 15px;">
<div style="position: absolute; top: 0; text-align: center; background-color: lightgrey">
<select id="list" onchange="show()"></select>
<input id="edit" type="checkbox" onchange="edit()">
<label>Edit</label>
</div>
<div id="editor" style="display: none">
<textarea id="data" style="float: left; width: 640px; height: 265px; overflow: scroll; white-space: pre;"></textarea>
<div style="float: left; border-top: 1px solid grey">
<button class="add" onclick="add('A3/1')">A3</button><button class="add" onclick="add('A3/2.')">2·</button><button class="add" onclick="add('A3/2')">2</button><button class="add" onclick="add('A3/4.')">4·</button><button class="add" onclick="add('A3/4')">4</button><button class="add" onclick="add('A3/8')">8</button><button class="add" onclick="add('A3/16')">16</button><br>
<button class="add" onclick="add('B3/1')">B3</button><button class="add" onclick="add('B3/2.')">2·</button><button class="add" onclick="add('B3/2')">2</button><button class="add" onclick="add('B3/4.')">4·</button><button class="add" onclick="add('B3/4')">4</button><button class="add" onclick="add('B3/8')">8</button><button class="add" onclick="add('B3/16')">16</button><br>
<button class="add" onclick="add('C4/1')">C4</button><button class="add" onclick="add('C4/2.')">2·</button><button class="add" onclick="add('C4/2')">2</button><button class="add" onclick="add('C4/4.')">4·</button><button class="add" onclick="add('C4/4')">4</button><button class="add" onclick="add('C4/8')">8</button><button class="add" onclick="add('C4/16')">16</button><br>
<button class="add" onclick="add('D4/1')">D4</button><button class="add" onclick="add('D4/2.')">2·</button><button class="add" onclick="add('D4/2')">2</button><button class="add" onclick="add('D4/4.')">4·</button><button class="add" onclick="add('D4/4')">4</button><button class="add" onclick="add('D4/8')">8</button><button class="add" onclick="add('D4/16')">16</button><br>
<button class="add" onclick="add('E4/1')">E4</button><button class="add" onclick="add('E4/2.')">2·</button><button class="add" onclick="add('E4/2')">2</button><button class="add" onclick="add('E4/4.')">4·</button><button class="add" onclick="add('E4/4')">4</button><button class="add" onclick="add('E4/8')">8</button><button class="add" onclick="add('E4/16')">16</button><br>
<button class="add" onclick="add('F4/1')">F4</button><button class="add" onclick="add('F4/2.')">2·</button><button class="add" onclick="add('F4/2')">2</button><button class="add" onclick="add('F4/4.')">4·</button><button class="add" onclick="add('F4/4')">4</button><button class="add" onclick="add('F4/8')">8</button><button class="add" onclick="add('F4/16')">16</button><br>
<button class="add" onclick="add('G4/1')">G4</button><button class="add" onclick="add('G4/2.')">2·</button><button class="add" onclick="add('G4/2')">2</button><button class="add" onclick="add('G4/4.')">4·</button><button class="add" onclick="add('G4/4')">4</button><button class="add" onclick="add('G4/8')">8</button><button class="add" onclick="add('G4/16')">16</button><br>
<button class="add" onclick="add('A4/1')">A4</button><button class="add" onclick="add('A4/2.')">2·</button><button class="add" onclick="add('A4/2')">2</button><button class="add" onclick="add('A4/4.')">4·</button><button class="add" onclick="add('A4/4')">4</button><button class="add" onclick="add('A4/8')">8</button><button class="add" onclick="add('A4/16')">16</button><br>
<button class="add" onclick="add('B4/1')">B4</button><button class="add" onclick="add('B4/2.')">2·</button><button class="add" onclick="add('B4/2')">2</button><button class="add" onclick="add('B4/4.')">4·</button><button class="add" onclick="add('B4/4')">4</button><button class="add" onclick="add('B4/8')">8</button><button class="add" onclick="add('B4/16')">16</button><br>
<button class="add" onclick="add('C5/1')">C5</button><button class="add" onclick="add('C5/2.')">2·</button><button class="add" onclick="add('C5/2')">2</button><button class="add" onclick="add('C5/4.')">4·</button><button class="add" onclick="add('C5/4')">4</button><button class="add" onclick="add('C5/8')">8</button><button class="add" onclick="add('C5/16')">16</button><br>
<button class="add" onclick="add('D5/1')">D5</button><button class="add" onclick="add('D5/2.')">2·</button><button class="add" onclick="add('D5/2')">2</button><button class="add" onclick="add('D5/4.')">4·</button><button class="add" onclick="add('D5/4')">4</button><button class="add" onclick="add('D5/8')">8</button><button class="add" onclick="add('D5/16')">16</button><br>
<button class="add" onclick="add('E5/1')">E5</button><button class="add" onclick="add('E5/2.')">2·</button><button class="add" onclick="add('E5/2')">2</button><button class="add" onclick="add('E5/4.')">4·</button><button class="add" onclick="add('E5/4')">4</button><button class="add" onclick="add('E5/8')">8</button><button class="add" onclick="add('E5/16')">16</button><br>
<button class="add" onclick="add('F5/1')">F5</button><button class="add" onclick="add('F5/2.')">2·</button><button class="add" onclick="add('F5/2')">2</button><button class="add" onclick="add('F5/4.')">4·</button><button class="add" onclick="add('F5/4')">4</button><button class="add" onclick="add('F5/8')">8</button><button class="add" onclick="add('F5/16')">16</button><br>
<button class="add" onclick="add('G5/1')">G5</button><button class="add" onclick="add('G5/2.')">2·</button><button class="add" onclick="add('G5/2')">2</button><button class="add" onclick="add('G5/4.')">4·</button><button class="add" onclick="add('G5/4')">4</button><button class="add" onclick="add('G5/8')">8</button><button class="add" onclick="add('G5/16')">16</button><br>
<button class="add" onclick="add('A5/1')">A5</button><button class="add" onclick="add('A5/2.')">2·</button><button class="add" onclick="add('A5/2')">2</button><button class="add" onclick="add('A5/4.')">4·</button><button class="add" onclick="add('A5/4')">4</button><button class="add" onclick="add('A5/8')">8</button><button class="add" onclick="add('A5/16')">16</button><br>
</div>
<div style="clear: both; height: 5px"></div>
<button onclick="add('B4/2/r')">&frac12; Rest</button>
<button onclick="add('B4/4/r')">&frac14; Rest</button>
<button onclick="add('B4/8/r')">&frac18; Rest</button>
<button onclick="del()">Delete</button>
<button onclick="draw()">Draw</button>
<button onclick="save()">Save</button>
<div id="sheet" style="margin-left: 20px"></div>
<div style="clear: both; height: 20px"></div>
<script src="https://cdn.jsdelivr.net/npm/vexflow/build/cjs/vexflow.js"></script>
<script src="render.js?v=20250201"></script>
<script>

let select = document.getElementById('list')
let checkbox = document.getElementById('edit')
let editor = document.getElementById('editor')
let textarea = document.getElementById('data')
var songs = {}
var current = null

function show() {
    current = select.value
    document.title = current
    textarea.value = songs[current]
    renderSong('data', 'sheet')
}

function edit() {
    editor.style.display = checkbox.checked ? 'block' : 'none'
}

function add(note) {
    addNote('data', note)
}

function del() {
    deleteNote('data')
}

function save() {
    fetch('set.php?name=' + current, {
        method: 'POST',
        body: textarea.value,
    }).then(res => window.alert(res.status))
}

fetch("get.php").then(async res => {
    songs = await res.json()
    for (let name in songs) {
        let option = document.createElement('option')
        option.value = name
        option.innerText = name
        select.appendChild(option)
    }
})

</script>
</body>
</html>