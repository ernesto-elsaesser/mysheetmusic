<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Sheet Music</title>
<style>
.add {
    width: 40px;
    height: 32px;
    margin: 0;
    border: 0;
    border-right: 1px solid grey;
    border-bottom: 1px solid grey;
}
</style>
</head>
<body style="margin: 0; font-size: 15px;">
<div style="text-align: center">
<select id="list" onchange="show()" style="height: 32px; outline: none">
<option>Select a song &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>
</select>
</div>
<input id="mode" type="checkbox" onchange="edit()" style="position: fixed; top: 5px; right: 5px;" />
<div id="editor" style="display: none">
<textarea id="data" style="float: left; width: 400px; height: 283px; overflow: scroll; white-space: pre; margin-top: 4px; margin-right: 4px;"></textarea>
<div style="float: left; border-top: 1px solid grey; border-left: 1px solid grey; margin-top: 4px; margin-right: 4px;">
<button class="add" onclick="add('A3/1')">A3</button><button class="add" onclick="add('A3/2')">2</button><button class="add" onclick="add('A3/4')">4</button><button class="add" onclick="add('A3/8')">8</button><button class="add" onclick="add('A3/16')">16</button><br/>
<button class="add" onclick="add('B3/1')">B3</button><button class="add" onclick="add('B3/2')">2</button><button class="add" onclick="add('B3/4')">4</button><button class="add" onclick="add('B3/8')">8</button><button class="add" onclick="add('B3/16')">16</button><br/>
<button class="add" onclick="add('C4/1')">C4</button><button class="add" onclick="add('C4/2')">2</button><button class="add" onclick="add('C4/4')">4</button><button class="add" onclick="add('C4/8')">8</button><button class="add" onclick="add('C4/16')">16</button><br/>
<button class="add" onclick="add('D4/1')">D4</button><button class="add" onclick="add('D4/2')">2</button><button class="add" onclick="add('D4/4')">4</button><button class="add" onclick="add('D4/8')">8</button><button class="add" onclick="add('D4/16')">16</button><br/>
<button class="add" onclick="add('E4/1')">E4</button><button class="add" onclick="add('E4/2')">2</button><button class="add" onclick="add('E4/4')">4</button><button class="add" onclick="add('E4/8')">8</button><button class="add" onclick="add('E4/16')">16</button><br/>
<button class="add" onclick="add('F4/1')">F4</button><button class="add" onclick="add('F4/2')">2</button><button class="add" onclick="add('F4/4')">4</button><button class="add" onclick="add('F4/8')">8</button><button class="add" onclick="add('F4/16')">16</button><br/>
<button class="add" onclick="add('G4/1')">G4</button><button class="add" onclick="add('G4/2')">2</button><button class="add" onclick="add('G4/4')">4</button><button class="add" onclick="add('G4/8')">8</button><button class="add" onclick="add('G4/16')">16</button><br/>
<button class="add" onclick="add('A4/1')">A4</button><button class="add" onclick="add('A4/2')">2</button><button class="add" onclick="add('A4/4')">4</button><button class="add" onclick="add('A4/8')">8</button><button class="add" onclick="add('A4/16')">16</button><br/>
<button class="add" onclick="add('B4/1')">B4</button><button class="add" onclick="add('B4/2')">2</button><button class="add" onclick="add('B4/4')">4</button><button class="add" onclick="add('B4/8')">8</button><button class="add" onclick="add('B4/16')">16</button>
</div>
<div style="float: left; border-top: 1px solid grey; border-left: 1px solid grey; margin-top: 4px;">
    <button class="add" onclick="dot()">&bull;</button><button class="add" onclick="tie()">U</button><button class="add" onclick="del()">X</button><button class="add wide" onclick="show()">V</button><button class="add" onclick="save()">OK</button><br/>
    <button class="add" onclick="add('B4/1/r')">&minus;</button><button class="add" onclick="add('B4/2/r')">2</button><button class="add" onclick="add('B4/4/r')">4</button><button class="add" onclick="add('B4/8/r')">8</button><button class="add" onclick="add('B4/16/r')">16</button><br/>
    <button class="add" onclick="add('C5/1')">C5</button><button class="add" onclick="add('C5/2')">2</button><button class="add" onclick="add('C5/4')">4</button><button class="add" onclick="add('C5/8')">8</button><button class="add" onclick="add('C5/16')">16</button><br/>
<button class="add" onclick="add('D5/1')">D5</button><button class="add" onclick="add('D5/2')">2</button><button class="add" onclick="add('D5/4')">4</button><button class="add" onclick="add('D5/8')">8</button><button class="add" onclick="add('D5/16')">16</button><br/>
<button class="add" onclick="add('E5/1')">E5</button><button class="add" onclick="add('E5/2')">2</button><button class="add" onclick="add('E5/4')">4</button><button class="add" onclick="add('E5/8')">8</button><button class="add" onclick="add('E5/16')">16</button><br/>
<button class="add" onclick="add('F5/1')">F5</button><button class="add" onclick="add('F5/2')">2</button><button class="add" onclick="add('F5/4')">4</button><button class="add" onclick="add('F5/8')">8</button><button class="add" onclick="add('F5/16')">16</button><br/>
<button class="add" onclick="add('G5/1')">G5</button><button class="add" onclick="add('G5/2')">2</button><button class="add" onclick="add('G5/4')">4</button><button class="add" onclick="add('G5/8')">8</button><button class="add" onclick="add('G5/16')">16</button><br/>
<button class="add" onclick="add('A5/1')">A5</button><button class="add" onclick="add('A5/2')">2</button><button class="add" onclick="add('A5/4')">4</button><button class="add" onclick="add('A5/8')">8</button><button class="add" onclick="add('A5/16')">16</button><br/>
<button class="add" onclick="add('B5/1')">B5</button><button class="add" onclick="add('B5/2')">2</button><button class="add" onclick="add('B5/4')">4</button><button class="add" onclick="add('B5/8')">8</button><button class="add" onclick="add('B5/16')">16</button>
</div>
<div style="clear: both"></div>
</div>
<div id="sheet" style="margin-left: 20px"></div>
<div style="clear: both; height: 20px"></div>
<script src="https://cdn.jsdelivr.net/npm/vexflow/build/cjs/vexflow.js"></script>
<script src="render.js?v=20250201"></script>
<script>

let select = document.getElementById('list')
let checkbox = document.getElementById('mode')
let editor = document.getElementById('editor')
let textarea = document.getElementById('data')

var songs = {}
var current = null

function show() {
    current = select.value
    document.title = "Sheet: " + current
    textarea.value = songs[current]
    renderSong('data', 'sheet')
}

function edit() {
    editor.style.display = checkbox.checked ? 'block' : 'none'
}

function add(note) {
    addNote('data', note)
}

function del() {
    deleteNote('data')
}

function save() {
    editor.style.display = 'none'
    fetch('set.php', {
        method: 'POST',
        body: "name=" + current + "&data=" + textarea.value,
    }).then(res => window.alert(res.statusText))
}

fetch("get.php").then(async res => {
    songs = await res.json()
    for (let name in songs) {
        let option = document.createElement('option')
        option.value = name
        option.innerText = name
        select.appendChild(option)
    }
})

</script>
</body>
</html>